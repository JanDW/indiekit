{% extends "form.njk" %}

{% set title = __("Sign in") if not session.me else __("Welcome back") %}

{% block fieldset %}
  {{ errorSummary({
    title: {
      text: __("There was a problem")
    },
    description: {
      text: error
    }
  }) | indent(2) if error }}

  {% if not session.me %}
    {{ input({
      id: "me",
      name: "me",
      value: errors.me.value or pub.me,
      label: {
        text: __("Web address")
      },
      type: "url",
      errorMessage: {
        text: errors.me.msg,
        label: __("Error")
      } if errors.me
    }) | indent(2) }}

    {{ input({
      name: "redirect_uri",
      value: redirect_uri,
      field: {
        classes: "visually-hidden"
      },
      type: "hidden"
    }) | indent(2) }}

    {{ button({
      text: __("Sign in")
    }) | indent(2) }}
  {% else %}
    <a href="/sign-out">Sign out</a>
  {% endif %}
{% endblock %}