{% extends "form.njk" %}

{% set title = __("config.pub.title") %}
{% set parent = __("Configuration") %}

{% block fieldset %}
  {{ input({
    id: "me",
    name: "me",
    value: errors.me.value or pub.me or session.me,
    label: {
      text: __("config.pub.me.label")
    },
    hint: {
      text: __("config.pub.me.hint")
    },
    attributes: {
      readonly: true
    }
  }) | indent(2) }}

  {% set languageItems = [] %}
  {% for language in languages %}
    {% set result = languageItems.push({
      value: language.code,
      text: language.nativeName,
      selected: pub.locale == language.code
    }) %}
  {% endfor %}

  {{ select({
    id: "locale",
    name: "locale",
    label: {
      text: __("config.pub.locale.label")
    },
    items: languageItems,
    errorMessage: {
      text: errors.locale.msg,
      label: __("Error")
    } if errors.locale
  }) | indent(2) }}

  <datalist id="timezones">
  {% for timezone in timezones %}
    <option>{{ timezone }}</option>
  {% endfor %}
  </datalist>

  {{ input({
    id: "timezone",
    name: "timezone",
    value: errors.timezone.value or pub.timezone,
    label: {
      text: __("config.pub.timezone.label")
    },
    attributes: {
      list: "timezones"
    },
    errorMessage: {
      text: errors.timezone.msg,
      label: __("Error")
    } if errors.timezone
  }) | indent(2) }}

  {{ input({
    id: "configPath",
    name: "configPath",
    value: errors.configPath.value or pub.configPath,
    label: {
      text: __("config.pub.configPath.label") + " (" + __("optional") + ")"
    },
    hint: {
      text: __("config.pub.configPath.hint", "/docs/" + app.locale + "/website-configuration")
    }
  }) | indent(2) }}

  {{ button({
    text: __("Save changes") if referrer else __("Save and continue")
  }) | indent(2) }}
{% endblock %}