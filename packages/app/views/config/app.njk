{% extends "_form.njk" %}

{% set title = __("config.app.title") %}
{% set parent = __("config.title %s", app.name) %}

{% block fieldset %}
  {{ input({
    label: {
      text: __("config.app.me.label")
    },
    attributes: {
      readonly: true
    },
    id: "me",
    name: "me",
    value: app.me or session.me
  }) | indent(2) }}

  {{ textarea({
    label: {
      text: __("config.app.token.label")
    },
    attributes: {
      readonly: true
    },
    id: "token",
    name: "token",
    value: app.token or session.token
  }) | indent(2) }}

  {{ select({
    id: "publisher",
    name: "publisher",
    label: {
      text: __("config.app.publisher.label")
    },
    items: [{
      value: "github",
      text: __("publisher.github"),
      selected: app.publisher == "github"
    }, {
      value: "gitlab",
      text: __("publisher.gitlab"),
      selected: app.publisher == "gitlab",
      disabled: true
    }],
    errorMessage: {
      text: errors.publisher.msg,
      label: __("Error")
    } if errors.publisher
  }) | indent(2) }}

  {{ select({
    label: {
      text: __("config.app.locale.label")
    },
    hint: {
      text: __("config.app.locale.hint")
    },
    id: "locale",
    name: "locale",
    items: [{
      value: "de",
      text: __("locale.de"),
      selected: app.locale == "de"
    }, {
      value: "en",
      text: __("locale.en"),
      selected: app.locale == "en"
    }],
    errorMessage: {
      text: errors.locale.msg,
      label: __("Error")
    } if errors.locale
  }) | indent(2) }}

  {{ input({
    classes: "input--width-5",
    label: {
      text: __("config.app.themeColor.label")
    },
    id: "theme-color",
    name: "themeColor",
    type: "color",
    value: app.themeColor,
    errorMessage: {
      text: errors.themeColor.msg,
      label: __("Error")
    } if errors.themeColor
  }) | indent(2) }}

  {{ button({
    text: __("Save changes") if referrer else __("Save and continue")
  }) | indent(2) }}
{% endblock %}