{% extends "_form.njk" %}

{% set title = __("config.github.title") %}
{% set parent = __("config.title %s", app.name) %}

{% block fieldset %}
  {{ input({
    id: "user",
    name: "user",
    label: {
      text: __("config.github.user.label")
    },
    attributes: {
      spellcheck: "false"
    },
    value: github.user,
    errorMessage: {
      text: errors.user.msg,
      label: __("Error")
    } if errors.user
  }) | indent(2) }}

  {{ input({
    id: "repo",
    name: "repo",
    label: {
      text: __("config.github.repo.label")
    },
    hint: {
      text: __("config.github.repo.hint")
    },
    attributes: {
      spellcheck: "false"
    },
    value: github.repo,
    errorMessage: {
      text: errors.repo.msg,
      label: __("Error")
    } if errors.repo
  }) | indent(2) }}

  {{ input({
    id: "branch",
    name: "branch",
    label: {
      text: __("config.github.branch.label")
    },
    hint: {
      text: __("config.github.branch.hint")
    },
    attributes: {
      spellcheck: "false"
    },
    value: github.branch or "master",
    errorMessage: {
      text: errors.branch.msg,
      label: __("Error")
    } if errors.branch
  }) | indent(2) }}

  {{ input({
    id: "token",
    name: "token",
    label: {
      text: __("config.github.token.label")
    },
    hint: {
      text: "<a href=\"https://github.com/settings/tokens\">" + __("config.github.token.hint") + "</a>"
    },
    attributes: {
      maxlength: 40,
      spellcheck: "false"
    },
    value: github.token,
    errorMessage: {
      text: errors.token.msg,
      label: __("Error")
    } if errors.token
  }) | indent(2) }}

  {{ button({
    text: __("Save changes") if referrer else __("Save and continue")
  }) | indent(2) }}
{% endblock %}